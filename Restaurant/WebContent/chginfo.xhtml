<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 


	<ui:composition 
	xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:rich="http://richfaces.org/rich"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
	template="/template/common/commonLayout.xhtml"
	>
		

		<ui:define name="content">
		<center>

			<rich:panel style="width:400px">
					<center>
						<f:facet name="header">
							<h:outputText
								value="Change  #{regBean.user.login}'s personal info"
								styleClass="header"></h:outputText>
						</f:facet>
						<h:form>
							<rich:messages ajaxRendered="true" />
							<h:messages errorClass="errorMessage" infoClass="infoMessage"
								warnClass="warnMessage"></h:messages>
							<h:panelGrid columns="2">

								<h:outputText value="First name :"></h:outputText>
								<h:inputText id="firstname"
									value="#{userInfoBean.user.client.name}" required="true"
									requiredMessage="Please Enter First Name!"></h:inputText>

								<h:outputText value="Last name :"></h:outputText>
								<h:inputText id="lastname"
									value="#{userInfoBean.user.client.surname}" required="true"
									requiredMessage="Please Enter Last Name!"></h:inputText>
								<a4j:commandButton type="submit" value="Submit"
									action="#{userInfoBean.updateUser}" styleClass="c2"></a4j:commandButton>
								<h:commandButton type="reset" value="Reset" styleClass="c2"></h:commandButton>
								<a4j:commandButton type="submit" value="Change password"
									oncomplete="#{rich:component('passwordPane')}.show()"
									styleClass="c2"></a4j:commandButton>
							</h:panelGrid>
						</h:form>

						<rich:popupPanel id="passwordPane" autosized="true">
							<h:form>
								<h:panelGrid>
									<h:outputText value="Old password :"></h:outputText>
									<h:inputSecret id="password"
										value="#{userInfoBean.oldPassword}" required="true"
										requiredMessage="Please Enter your previous password!"></h:inputSecret>
									<h:outputText value="New password :"></h:outputText>
									<h:inputSecret id="confirmpassword"
										value="#{userInfoBean.newPassword}" required="true"
										requiredMessage="Please Enter NEW Password!"></h:inputSecret>
									<h:outputText value="Confirm new password :"></h:outputText>
									<h:inputSecret id="confirmNEWpassword"
										value="#{userInfoBean.confirmNewPassword}" required="true"
										requiredMessage="Please Confirm NEW Password!"></h:inputSecret>
									<a4j:commandButton type="submit" value="Confirm"
										action="#{userInfoBean.changePassword()}" styleClass="c2"></a4j:commandButton>
									<h:commandButton type="reset" value="Reset" styleClass="c2"></h:commandButton>
									<h:commandButton value="Close"
										onclick="#{rich:component('passwordPane')}.hide(); return false;" />
								</h:panelGrid>
							</h:form>
						</rich:popupPanel>
						<a4j:jsFunction name="changePassword"
							action="#{userInfoBean.changePassword}" execute="@this"
							oncomplete="#{rich:component('passwordPane')}.hide();" />
					</center>

				</rich:panel></center>
		</ui:define>
	</ui:composition>

